<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

	<h:form>
		<!-- ########INIZIO RICERCA AVANZATA##################### -->

		<p:outputPanel id="ricercaAvanzataPanel"
			styleClass="ricercaAvanzataPanel well">
			<div class="row" style="margin-bottom: 1em;">
				<div class="col-xs-12">
					<p:outputLabel class="ricercaAvanzataTitle"
						value="#{bundleDataSource['ricercaAvanzata.label.title']}" />
				</div>
			</div>
			<div class="row">
				<div class="col-xs-1 labelRicerca">
					<p:outputLabel
						value="#{bundleDataSource['ricercaAvanzata.label.titleAnnuncio']}" />
				</div>
				<div class="col-xs-2">
					<p:inputText value="#{dataScrollerBean.titleFilter}" maxlength="30" a:placeholder="#{bundleDataSource['ricercaAvanzata.title.placeHolder']}"/>
				</div>
				<div class="col-xs-1 labelRicerca">
					<p:outputLabel
						value="#{bundleDataSource['ricercaAvanzata.label.categoriaAnnuncio']}" />
				</div>
				<div class="col-xs-2">
					<p:selectOneMenu value="#{dataScrollerBean.categoryNameFilter}"
						panelStyle="width:180px" effect="fade" var="category"
						filter="true" filterMatchMode="startsWith"
						style="min-width: 166px !important;">
						<f:selectItem itemLabel="#{bundleDataSource['ricercaAvanzata.category.placeHolder']}" itemValue="" />
						<f:selectItems value="#{dataScrollerBean.categories}"
							var="category" itemLabel="#{category.name}"
							itemValue="#{category.name}" />
						<p:column>
							<h:outputText value="#{category.name}" />
						</p:column>
					</p:selectOneMenu>
				</div>
				<div class="col-xs-1 labelRicerca">
					<p:outputLabel
						value="#{bundleDataSource['ricercaAvanzata.label.creditiAnnuncio']}" />
				</div>
				<div class="col-xs-4">
					<p:slider for="minValue,maxValue" display="displayRange"
						style="width: 400px" range="true"
						displayTemplate="Between {min} and {max}" minValue="0"
						maxValue="20000" />
					<h:outputText id="displayRange"
						value="Between #{dataScrollerBean.minCreditsFilter} and #{dataScrollerBean.maxCreditsFilter}" />
					<h:inputHidden id="minValue"
						value="#{dataScrollerBean.minCreditsFilter}" />
					<h:inputHidden id="maxValue"
						value="#{dataScrollerBean.maxCreditsFilter}" />
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<div class="center-block">
						<p:commandButton style="border-radius: 30px;margin-top: 1em;"
							update="ItemsdataScroller"
							value="#{bundleDataSource['datascroller.button.executeadvancedSearch']}"
							actionListener="#{dataScrollerBean.doAdvancedSearch()}"
							styleClass="ui-priority-primary" />
					</div>
				</div>
			</div>
		</p:outputPanel>


		<!-- ########FINE RICERCA AVANZATA##################### -->



		<p:dataScroller widgetVar="ItemsdataScroller"
			id="ItemsdataScroller"
			value="#{dataScrollerBean.items}" var="item" chunkSize="10"
			scrollHeight="500" rowIndexVar="index"
			styleClass="myDataScroller center-block">
			<f:facet name="header">
            	#{bundleDataSource['datascroller.label.header']}
        	</f:facet>

			<div class="center-block" style="width: 100%; margin-bottom: 1em;">
				<p:panelGrid columns="2" layout="grid"
					columnClasses="datascrollerImage,detail">



					<p:graphicImage library="images"
						name="itemsUpload/#{item.imageUri}" />

					<p:outputPanel>

						<div class="row titleSection">
							<div class="col-xs-12">#{item.name}</div>
						</div>
						<br></br>
						<div class="row informationSection">
							<div class="col-xs-6">
								<div class="col-xs-6 labelSection">
									#{bundleDataSource['datascroller.label.priceCredit']}</div>
								<div class="col-xs-6">#{item.priceCredit}</div>
							</div>
							<div class="col-xs-6">
								<div class="col-xs-6 labelSection">#{bundleDataSource['datascroller.label.categoryCode']}</div>
								<div class="col-xs-6">#{item.categoryCode}</div>
							</div>
						</div>

						<div class="row informationSection">
							<div class="col-xs-3 labelSection">
								#{bundleDataSource['datascroller.label.publishDate']}</div>
							<div class="col-xs-9">
								<h:outputText value="#{item.publishDate}">
									<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
								</h:outputText>
							</div>
						</div>

						<ui:remove>
							<div class="row descriptionSection">
								<div class="col-xs-3 labelSection">
									#{bundleDataSource['datascroller.label.description']}</div>
								<div class="col-xs-9">#{item.description}</div>
							</div>
						</ui:remove>

						<div class="row descriptionButton">
							<p:commandButton
								style="float:right;margin-right: 10px;border-radius: 10px;"
								value="#{bundleDataSource['datascroller.button.goToDetails']}"
								action="#{dataScrollerBean.goToDetailsPage(item.id)}"
								styleClass="ui-priority-primary" />
						</div>

					</p:outputPanel>

				</p:panelGrid>
			</div>
		</p:dataScroller>
	</h:form>

</ui:composition>